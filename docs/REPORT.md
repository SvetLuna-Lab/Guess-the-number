# Документация к проекту «Числовая угадайка»

## 1. Назначение проекта
Проект представляет собой консольную игру «Числовая угадайка». Программа загадывает случайное целое число в диапазоне от 1 до n, а пользователь пытается угадать его. Игра сопровождается подсказками «больше/меньше», ведёт подсчёт попыток и поддерживает повторные раунды.

Цель проекта — продемонстрировать:
- работу с модулем `random`;
- корректную обработку пользовательского ввода (валидация);
- организацию циклов и ветвлений;
- декомпозицию на функции;
- базовое тестирование логики с помощью `pytest`;
- оформление проекта в виде репозитория (структура, документация, CI).

---

## 2. Требования (ТЗ)
### Базовая версия
1) Подключить модуль `random`.  
2) Загадать число в диапазоне 1..100.  
3) Вывести приветствие:
`Добро пожаловать в числовую угадайку`  
4) Реализовать защиту от некорректного ввода: если пользователь ввёл не число или число вне диапазона, вывести:
`А может быть все-таки введем целое число от 1 до ...?`  
5) Сравнивать введённое число с загаданным и выводить:
- `Ваше число меньше загаданного, попробуйте еще разок`
- `Ваше число больше загаданного, попробуйте еще разок`
- `Вы угадали, поздравляем!`
6) Вывести прощание:
`Спасибо, что играли в числовую угадайку. Еще увидимся...`

### Улучшения
1) Подсчёт попыток пользователя и вывод числа попыток после угадывания.  
2) Возможность повторной игры после окончания раунда.  
3) Возможность задавать правую границу диапазона (1..n).

---

## 3. Алгоритм работы программы
1) Выводится приветствие.  
2) Запрашивается правая граница диапазона `n` (натуральное число ≥ 1).  
3) Генерируется случайное число `secret` в диапазоне 1..n.  
4) Запускается цикл угадывания:
   - Пользователь вводит число.
   - Если ввод некорректен, программа выводит сообщение об ошибке и запрашивает ввод снова.
   - Если ввод корректен, увеличивается счётчик попыток и выполняется сравнение с `secret`.
   - При совпадении выводится сообщение об успехе и количество попыток, цикл завершается.
5) После раунда программа спрашивает, сыграть ли ещё раз:
   - если «да» — начинается новый раунд;
   - если «нет» — выводится прощание и программа завершается.

---

## 4. Структура проекта
Рекомендуемая структура репозитория:
```text
guess-the-number/
├─ src/
│ └─ guess_the_number/
│ ├─ init.py
│ └─ game.py
├─ tests/
│ └─ test_game.py
├─ docs/
│ ├─ REQUIREMENTS.md
│ ├─ USER_GUIDE.md
│ └─ REPORT.md
├─ .github/workflows/ci.yml
├─ .gitignore
├─ pyproject.toml
└─ README.md

```
---

## 5. Описание ключевых функций (game.py)

### `is_valid(text: str, right: int) -> bool`
Проверяет корректность ввода:
- строка должна быть целым числом;
- число должно лежать в диапазоне 1..right.

Возвращает `True`, если ввод корректный, иначе `False`.

### `ask_right_border(...) -> int`
- Запрашивает у пользователя правую границу `n`.
- Если ввод некорректен — выводит:
- `А может быть все-таки введем натуральное число?`
- и повторяет запрос.

### `play_one_round(right: int, secret: int, ...) -> int`
- Запускает один раунд угадывания.
- Считает попытки (учитываются только корректные числовые вводы).
- Возвращает количество попыток, когда число угадано.

### `ask_play_again(...) -> bool`
Запрашивает повторную игру. Поддерживает ответы:
- да: `да / д / yes / y`
- нет: `нет / н / no / n`

### `run_game() -> None`
Главная функция, которая запускает игру:
- приветствие;
- циклы раундов;
- прощание.

---

## 6. Инструкция пользователя
1) Запустите программу.  
2) Введите правую границу диапазона `n`.  
3) Вводите числа от 1 до n, пока не угадаете.  
4) После угадывания программа покажет количество попыток и предложит сыграть ещё раз.

---

## 7. Тестирование
Для проверки корректности реализованы автотесты `pytest`.

### Что проверяется тестами
- корректность функции `is_valid()` на разных входах;
- подсчёт попыток (включая ситуацию с некорректным вводом);
- корректность обработки ввода для границы `n`;
- корректность выбора ответа «сыграть ещё раз».

### Как запустить тесты локально
```bash
python -m pip install -e .[dev]
pytest
```

### CI (GitHub Actions)

В репозитории подключён workflow CI, который автоматически запускает тесты при:

- push в репозиторий;

- pull request.


## 8. Примеры сценариев
Пример 1: некорректный ввод

Пользователь вводит abc → программа сообщает об ошибке и просит повторить ввод.

Пример 2: угадывание

Если secret = 7, пользователь вводит 3 → «меньше», вводит 9 → «больше», вводит 7 → победа + число попыток.


## 9. Возможные расширения (на будущее)

- режим подсказок «горячо/холодно» по расстоянию;

- выбор уровня сложности (ограничение по попыткам);

- статистика: среднее число попыток за несколько игр;

- логирование результатов в файл.


## 10. Вывод

Проект реализует все пункты ТЗ: генерацию случайного числа, устойчивую обработку ввода, подсказки, подсчёт попыток, повторную игру и оформление в виде репозитория с документацией и тестами. Игровая логика вынесена в функции, что обеспечивает читаемость, масштабируемость и тестируемость кода.
